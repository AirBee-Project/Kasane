# Kasane Core

**Kasane Core** は、Kasaneのデータベース実装であり、4次元時空間データの効率的な保存と管理を提供します。ドローンの航路管理やその他の時空間情報をトランザクションサポートと型安全性により管理するための基盤レイヤーとして機能します。

[🇬🇧 English Version](./README.md)

## 🌱 特長

- **4次元データストレージ**: 時空間IDを用いた時空間データの効率的な保存と検索
- **トランザクションサポート**: データの整合性と安全性を保証するACIDトランザクション
- **型安全性**: データの破損を防ぎ、信頼性を確保する強い型システム
- **パフォーマンス最適化**: 大規模な時空間データセットでの高性能操作に最適化
- **WebAssembly対応**: ブラウザやエッジ環境でのデプロイ用にWebAssemblyにコンパイル可能

## 🏗️ アーキテクチャ

Kasane Coreデータベースは以下のコンポーネントで構築されています：

### ストレージエンジン
- 時空間IDの効率的なインデックス化と保存
- 範囲クエリと空間操作に最適化
- トランザクションログと復旧メカニズム

### パーサー
- コマンドの解析と検証
- 時空間クエリ用のSQL類似構文
- 型チェックとエラーハンドリング

### トランザクションマネージャー
- ACIDトランザクションサポート
- 並行アクセス制御
- ロールバックと復旧機能

## 🚀 はじめに

### ビルド

```bash
# コアデータベースをビルド
cargo build --package kasane

# データベースを実行
cargo run --package kasane
```

### テスト

```bash
# 全てのテストを実行
cargo test --package kasane

# 詳細出力付きで実行
cargo test --package kasane -- --nocapture
```

### ベンチマーク

```bash
# パフォーマンスベンチマークを実行
cargo bench --package kasane
```

## 🔧 使用方法

Kasane Coreデータベースは時空間データ管理用のコマンドラインインターフェースを提供します：

```bash
# データベースを開始
./target/release/kasane

# 例のコマンド（データベースCLI内で）:
ADD_SPACE space_name;
ADD_KEYS key1 key2 key3;
PUT_VALUE space_name key1 "value1";
```

## 📊 コマンドリファレンス

### スペース管理
- `ADD_SPACE <name>` - 新しいデータスペースを作成
- `DELETE_SPACE <name>` - データスペースを削除

### キー管理  
- `ADD_KEYS <key1> <key2> ...` - 現在のスペースにキーを追加
- `DELETE_KEYS <key1> <key2> ...` - 現在のスペースからキーを削除

### 値操作
- `PUT_VALUE <space> <key> <value>` - 値を挿入または更新
- `SET_VALUE <space> <key> <value>` - 値を設定（存在しない場合は作成）
- `DELETE_VALUE <space> <key>` - 値を削除

### トランザクション
- `TRANSACTION { <commands> }` - トランザクション内でコマンドを実行

## 🤝 コントリビューションについて

Kasane Coreデータベースの改善への貢献を歓迎します：

- バグ報告と機能リクエスト
- パフォーマンス最適化
- ドキュメント改善
- テストカバレッジの拡張

## 🧪 テストに関する考え方

コアデータベースはデータ整合性とパフォーマンスを優先します：

- 全てのコンポーネントに対する包括的なユニットテスト
- 複雑な操作に対する統合テスト
- 重要パスのパフォーマンスベンチマーク
- データ整合性のためのプロパティベースドテスト

テストの実行：
```bash
cargo test --package kasane
```

## ⚡ パフォーマンス

パフォーマンスベンチマークにより最適な動作を保証：

- ストレージと検索のベンチマーク
- トランザクションパフォーマンステスト
- 並行アクセスベンチマーク
- メモリ使用量プロファイリング

ベンチマークの実行：
```bash
cargo bench --package kasane
```

## 📜 ライセンス

このコアデータベース実装は MIT ライセンスの下で公開されています。
詳細は [LICENSE](../LICENSE) ファイルをご覧ください。